<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <meta name="generator" content="pandoc">
    <title>Software Carpentry: </title>
    <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" type="text/css" href="css/bootstrap/bootstrap.css" />
    <link rel="stylesheet" type="text/css" href="css/bootstrap/bootstrap-theme.css" />
    <link rel="stylesheet" type="text/css" href="css/swc.css" />
    <link rel="alternate" type="application/rss+xml" title="Software Carpentry Blog" href="http://software-carpentry.org/feed.xml"/>
    <meta charset="UTF-8" />
    <!-- HTML5 shim, for IE6-8 support of HTML5 elements -->
    <!--[if lt IE 9]>
      <script src="https://html5shim.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    
    <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
    
      ga('create', 'UA-59802572-17', 'auto');
      ga('send', 'pageview');
    
    </script>
  </head>
  <body class="lesson">
    <div class="container card">
      <div class="banner">
        <a href="http://software-carpentry.org" title="Software Carpentry">
          <img alt="Software Carpentry banner" src="img/software-carpentry-banner.png" />
        </a>
      </div>
      <article>
      <div class="row">
        <div class="col-md-10 col-md-offset-1">
                    <h1 class="title"></h1>
          <h1 id="데이터-과학">데이터 과학</h1>
<section class="objectives panel panel-warning">
<div class="panel-heading">
<h2 id="학습-목표"><span class="glyphicon glyphicon-certificate"></span>학습 목표</h2>
</div>
<div class="panel-body">
<ul>
<li>작은 다수 그림(Small Multple)은 격자그림(trellis, lattice, grid, panel chart)로 동일한 척도와 축을 사용하여 쉽게 비교가 될 수 있도록 했다.</li>
<li>정적 격자그림에 더하여 자바스크립트로 인터랙티브 기능을 추가한 <code>trelliscopejs</code>도 있다.</li>
</ul>
</div>
</section>
<h2 id="년-19대-대통령-선거-시구군-득표율-및-사회경제지표">0. 2017년 19대 대통령 선거 시구군 득표율 및 사회경제지표</h2>
<p><a href="http://nec.go.kr/portal/bbs/list/B0000338.do?menuNo=200061">제19대 대통령선거 투표구별 개표자료</a>를 다운받거나 <a href="https://github.com/OhmyNews">오마이뉴스 GitHub</a> 사이트에 공개된 <a href="https://github.com/OhmyNews/2017-Election">2017년 19대 대통령 선거 시구군 득표율 사회경제지표 분석</a> 파일을 다운로드 한다.</p>
<p>2017년 19대 대통령 선거 시구군 득표율 정보 외에 주요 사회경제지표로 다음이 포함되어 있다.</p>
<ul>
<li>“17년 유권자평균연령” : 시구군별 유권자의 연령을 추정</li>
<li>“유권자평균교육연수” : 시구군별 유권자의 교육정도를 추정</li>
<li>“17년제곱미터당가격” : 시구군별 유권자가 보유한 재력을 추정</li>
<li>“평균 보험료” : 시구군별 유권자의 소득을 추정</li>
</ul>
<h2 id="환경설정-및-데이터-불러오기">1. 환경설정 및 데이터 불러오기</h2>
<p><code>lattice</code> 팩키지를 사용하지만 <code>trellis</code> 전통을 이어 받았기 때문에 명칭에 대해 혼란스러워 할 것은 없다. <code>lattice</code> 그래픽 시스템을 사용하여 한글사용(<code>fontfamily = 'NanumGothic'</code>), 기호에 사용될 색상 등을 설정하고, <code>trellis.par.set()</code> 명령어를 실행하면 적용된다.</p>
<p><code>lattice</code> 시각화에 사용할 데이터는 정리가 잘 되어 있어 <code>tidyverse</code> 팩키지 <code>read_csv</code> 함수를 사용하여 불러와서 후보에 대한 요인형 자료형 설정만 하면 충분하다.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># 0. 환경설정 ----------------------------------------------------------</span>
<span class="co"># library(tidyverse)</span>
<span class="co"># library(readxl)</span>
<span class="co"># library(rgdal)</span>
<span class="co"># library(lattice)</span>
<span class="co"># library(latticeExtra)</span>
<span class="co"># library(extrafont)</span>
<span class="co"># library(directlabels)</span>
<span class="co"># loadfonts()</span>
<span class="co"># par(family = &#39;NanumGothic&#39;)</span>

## 0.1. 각 정당별 색상
party_col &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;#065ce8&quot;</span>, <span class="st">&quot;#ff0000&quot;</span>,<span class="st">&quot;#07f91f&quot;</span>,<span class="st">&quot;#00faff&quot;</span>,<span class="st">&quot;#f2ee09&quot;</span>)

## 0.2. lattice 환경설정 ---------------------------------------------
wz_setting &lt;-<span class="st"> </span><span class="kw">trellis.par.get</span>()

wz_setting$fontsize &lt;-<span class="st"> </span><span class="kw">list</span>(<span class="dt">text=</span> <span class="dv">8</span>, <span class="dt">points =</span> <span class="dv">4</span>)
wz_setting$grid.pars &lt;-<span class="st"> </span><span class="kw">list</span>(<span class="dt">fontfamily =</span> <span class="st">&#39;NanumGothic&#39;</span>)
wz_setting$superpose.symbol &lt;-<span class="st"> </span><span class="kw">list</span>(<span class="dt">col =</span> party_col)

<span class="kw">trellis.par.set</span>(wz_setting)

<span class="co"># 1. 데이터 가져오기 ----------------------------------------------------------</span>
<span class="co"># 1.1. 오마이뉴스 대선 데이터 가져오기 ----------------------------------------------------------</span>
<span class="co"># https://github.com/OhmyNews/2017-Election</span>

oh_dat &lt;-<span class="st"> </span><span class="kw">read_csv</span>(<span class="st">&quot;https://raw.githubusercontent.com/OhmyNews/2017-Election/master/170509_Elec_Data-utf8.csv&quot;</span>)
oh_dat &lt;-<span class="st"> </span>oh_dat %&gt;%<span class="st"> </span>
<span class="st">    </span><span class="kw">mutate</span>(후보명 =<span class="st"> </span><span class="kw">factor</span>(후보명, <span class="dt">levels=</span><span class="kw">c</span>(<span class="st">&quot;문재인&quot;</span>, <span class="st">&quot;홍준표&quot;</span>, <span class="st">&quot;안철수&quot;</span>, <span class="st">&quot;유승민&quot;</span>, <span class="st">&quot;심상정&quot;</span>)))</code></pre></div>
<h2 id="전체적인-흐름-five-pairwise">2. 전체적인 흐름 <a href="#fn1" class="footnoteRef" id="fnref1"><sup>1</sup></a></h2>
<p>데이터가 준비되었으면 각 변수들 간의 관계을 한 눈에 살펴보는 것이 필요하다. 각 그래픽 시스템마다 기본함수로 지원되고 있고 <code>lattice</code> 팩키지의 경우 <code>splom()</code> 함수가 변수간 산점도 도식화를 지원한다.</p>
<ul>
<li><code>pairs()</code> : Base 시각화 시스템</li>
<li><code>splom()</code> : lattice 시각화 시스템</li>
<li><code>plotmatrix()</code> : ggplot 시각화 시스템</li>
</ul>
<h3 id="splom-변수간-연관성-시각화">2.1. <code>splom</code> 변수간 연관성 시각화</h3>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># 2. 전체적인 흐름 ----------------------------------------------------------</span>
## 2.1. 연속형 ---------------------------
<span class="kw">splom</span>(~oh_dat[<span class="dv">9</span>:<span class="dv">14</span>])</code></pre></div>
<p><img src="fig/lattice-overview-1.png" style="display: block; margin: auto;" /></p>
<h3 id="후보별-득표율-분석">2.2. 후보별 득표율 분석</h3>
<p>가장 먼저 대선 후보별 시구군별 득표율을 시각화한다.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">## 2.2. 득표율 분포 ---------------------------
### 2.2.1. 후보별 득표율 분리 ---------------------------
vote_pcnt_plt &lt;-<span class="st"> </span><span class="kw">densityplot</span>(~<span class="st"> `</span><span class="dt">후보별 득표율</span><span class="st">`</span>|<span class="st">`</span><span class="dt">후보명</span><span class="st">`</span>, <span class="dt">data =</span> oh_dat, 
                             <span class="dt">as.table =</span> <span class="ot">TRUE</span>,
                             <span class="dt">groups =</span> <span class="st">`</span><span class="dt">후보명</span><span class="st">`</span>,
                             <span class="dt">plot.points =</span> <span class="st">&quot;jitter&quot;</span>,
                             <span class="dt">layout =</span> <span class="kw">c</span>(<span class="dv">1</span>, <span class="dv">5</span>),
                             <span class="dt">strip =</span> <span class="ot">FALSE</span>,
                             <span class="dt">scales =</span> <span class="kw">list</span>(<span class="dt">relation =</span> <span class="st">&quot;free&quot;</span>))
                             

<span class="kw">direct.label</span>(vote_pcnt_plt)</code></pre></div>
<p><img src="fig/lattice-density-vote-pcnt-1.png" style="display: block; margin: auto;" /></p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">### 2.2.2. 후보별 득표율 모아보기 ---------------------------
votes_pcnt_one_plt &lt;-<span class="st"> </span><span class="kw">densityplot</span>(~<span class="st"> `</span><span class="dt">후보별 득표율</span><span class="st">`</span>, <span class="dt">data =</span> oh_dat, 
                             <span class="dt">as.table =</span> <span class="ot">TRUE</span>,
                             <span class="dt">groups =</span> <span class="st">`</span><span class="dt">후보명</span><span class="st">`</span>,
                             <span class="dt">ref =</span> <span class="ot">TRUE</span>,
                             <span class="dt">plot.points =</span> <span class="st">&quot;jitter&quot;</span>,
                             <span class="dt">layout =</span> <span class="kw">c</span>(<span class="dv">1</span>, <span class="dv">1</span>),
                             <span class="dt">strip =</span> <span class="ot">FALSE</span>,
                             <span class="dt">scales =</span> <span class="kw">list</span>(<span class="dt">relation =</span> <span class="st">&quot;same&quot;</span>))

<span class="kw">direct.label</span>(votes_pcnt_one_plt)</code></pre></div>
<p><img src="fig/lattice-density-vote-pcnt-2.png" style="display: block; margin: auto;" /></p>
<h3 id="후보별-득표율-분석-1">2.2. 후보별 득표율 분석</h3>
<p>후보별 득표율에 이어 각 대선후보가 실제 득표한 시구군별 득표수는 다음과 같다.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">## 2.3. 득표수 분포 ---------------------------
### 2.3.1. 후보별 득표수 분리 ---------------------------
votes_plt &lt;-<span class="st"> </span><span class="kw">densityplot</span>(~<span class="st"> `</span><span class="dt">후보별 득표수</span><span class="st">`</span>|<span class="st">`</span><span class="dt">후보명</span><span class="st">`</span>, <span class="dt">data =</span> oh_dat, 
                             <span class="dt">groups =</span> <span class="st">`</span><span class="dt">후보명</span><span class="st">`</span>,
                             <span class="dt">auto.key=</span><span class="ot">TRUE</span>,
                             <span class="dt">plot.points =</span> <span class="st">&quot;jitter&quot;</span>,
                             <span class="dt">layout =</span> <span class="kw">c</span>(<span class="dv">1</span>, <span class="dv">5</span>),
                             <span class="dt">strip =</span> <span class="ot">FALSE</span>,
                             <span class="dt">col.line =</span> party_col,
                             <span class="dt">scales =</span> <span class="kw">list</span>(<span class="dt">relation =</span> <span class="st">&quot;same&quot;</span>,
                                           <span class="dt">x =</span> <span class="kw">list</span>(<span class="dt">log =</span> <span class="dv">10</span>)))

<span class="kw">direct.label</span>(votes_plt)</code></pre></div>
<p><img src="fig/lattice-density-votes-1.png" style="display: block; margin: auto;" /></p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">### 2.3.2. 후보별 득표수 모아보기 ---------------------------
votes_one_plt &lt;-<span class="st"> </span><span class="kw">densityplot</span>(~<span class="st"> `</span><span class="dt">후보별 득표수</span><span class="st">`</span>, <span class="dt">data =</span> oh_dat, 
            <span class="dt">as.table =</span> <span class="ot">TRUE</span>,
            <span class="dt">groups =</span> <span class="st">`</span><span class="dt">후보명</span><span class="st">`</span>,
            <span class="dt">ref =</span> <span class="ot">TRUE</span>,
            <span class="dt">plot.points =</span> <span class="st">&quot;jitter&quot;</span>,
            <span class="dt">layout =</span> <span class="kw">c</span>(<span class="dv">1</span>, <span class="dv">1</span>),
            <span class="dt">strip =</span> <span class="ot">FALSE</span>,
            <span class="dt">col.line =</span> party_col,
            <span class="dt">scales =</span> <span class="kw">list</span>(<span class="dt">relation =</span> <span class="st">&quot;same&quot;</span>,
                          <span class="dt">x =</span> <span class="kw">list</span>(<span class="dt">log =</span> <span class="dv">10</span>)))

<span class="kw">direct.label</span>(votes_one_plt)</code></pre></div>
<p><img src="fig/lattice-density-votes-2.png" style="display: block; margin: auto;" /></p>
<h3 id="시도-지역별-후보-득표율과-득표수">2.4. 시도 지역별 후보 득표율과 득표수</h3>
<p>시도를 기준으로 각 후보가 득표한 득표율과 득표수는 다음과 같다.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">## 2.4. 지역별 ---------------------------
<span class="kw">densityplot</span>(~<span class="st"> `</span><span class="dt">후보별 득표율</span><span class="st">`</span>|<span class="st">`</span><span class="dt">시도</span><span class="st">`</span>, <span class="dt">data =</span> oh_dat, 
            <span class="dt">as.table =</span> <span class="ot">TRUE</span>,
            <span class="dt">groups =</span> <span class="st">`</span><span class="dt">후보명</span><span class="st">`</span>,
            <span class="co"># auto.key = list(columns = 5, title=&quot;후보&quot;),</span>
            <span class="dt">plot.points =</span> <span class="st">&quot;jitter&quot;</span>,
            <span class="dt">strip =</span> <span class="ot">TRUE</span>,
            <span class="dt">scales =</span> <span class="kw">list</span>(<span class="dt">relation =</span> <span class="st">&quot;free&quot;</span>),
            <span class="dt">col.line =</span> party_col,
            <span class="dt">par.settings =</span> <span class="kw">list</span>(<span class="dt">superpose.symbol =</span> <span class="kw">list</span>(<span class="dt">pch =</span> <span class="dv">1</span>, <span class="dt">cex =</span> <span class="fl">1.0</span>,
                                                        <span class="dt">col =</span> party_col)))</code></pre></div>
<p><img src="fig/lattice-density-region-1.png" style="display: block; margin: auto;" /></p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">densityplot</span>(~<span class="st"> `</span><span class="dt">후보별 득표수</span><span class="st">`</span>|<span class="st">`</span><span class="dt">시도</span><span class="st">`</span>, <span class="dt">data =</span> oh_dat, 
            <span class="dt">as.table =</span> <span class="ot">TRUE</span>,
            <span class="dt">groups =</span> <span class="st">`</span><span class="dt">후보명</span><span class="st">`</span>,
            <span class="co"># auto.key = list(columns = 5, title=&quot;후보&quot;),</span>
            <span class="dt">plot.points =</span> <span class="st">&quot;jitter&quot;</span>,
            <span class="dt">strip =</span> <span class="ot">TRUE</span>,
            <span class="dt">scales =</span> <span class="kw">list</span>(<span class="dt">relation =</span> <span class="st">&quot;same&quot;</span>,
                          <span class="dt">x =</span> <span class="kw">list</span>(<span class="dt">log =</span> <span class="dv">10</span>)),
            <span class="dt">col.line =</span> party_col,
            <span class="dt">par.settings =</span> <span class="kw">list</span>(<span class="dt">superpose.symbol =</span> <span class="kw">list</span>(<span class="dt">pch =</span> <span class="dv">1</span>, <span class="dt">cex =</span> <span class="fl">1.0</span>,
                                                        <span class="dt">col =</span> party_col)))</code></pre></div>
<p><img src="fig/lattice-density-region-2.png" style="display: block; margin: auto;" /></p>
<h3 id="시도-지역별-후보-득표율과-득표수-1">2.5. 시도 지역별 후보 득표율과 득표수</h3>
<p>시구군별 유권자가 보유한 재력을 추정하는 “17년제곱미터당가격”, 시구군별 유권자의 소득을 추정하는 “평균 보험료”를 바탕으로 각 후보별 득표율과 득표수를 살펴보는 것은 의미가 있다.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">## 2.5. 자산, 소득과 득표 ---------------------------
### 2.5.1. 자산, 소득과 득표율
<span class="kw">xyplot</span>(<span class="st">`</span><span class="dt">후보별 득표율</span><span class="st">`</span>~<span class="st"> `</span><span class="dt">17년제곱미터당가격</span><span class="st">`</span>|<span class="st">`</span><span class="dt">후보명</span><span class="st">`</span>, <span class="dt">data =</span> oh_dat, 
            <span class="dt">as.table =</span> <span class="ot">TRUE</span>,
            <span class="dt">groups =</span> <span class="st">`</span><span class="dt">후보명</span><span class="st">`</span>,
       <span class="dt">panel =</span> function(x, y, ...) {
           <span class="kw">panel.smoothScatter</span>(x, y, ...)
           <span class="kw">panel.loess</span>(x, y, <span class="dt">col=</span><span class="st">&quot;red&quot;</span>)
       })</code></pre></div>
<p><img src="fig/lattice-xyplot-asset-income-1.png" style="display: block; margin: auto;" /></p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">xyplot</span>(<span class="st">`</span><span class="dt">후보별 득표율</span><span class="st">`</span>~<span class="st"> `</span><span class="dt">평균 보험료</span><span class="st">`</span>|<span class="st">`</span><span class="dt">후보명</span><span class="st">`</span>, <span class="dt">data =</span> oh_dat, 
       <span class="dt">as.table =</span> <span class="ot">TRUE</span>,
       <span class="dt">groups =</span> <span class="st">`</span><span class="dt">후보명</span><span class="st">`</span>,
       <span class="dt">panel =</span> function(x, y, ...) {
           <span class="kw">panel.smoothScatter</span>(x, y, ...)
           <span class="kw">panel.loess</span>(x, y, <span class="dt">col=</span><span class="st">&quot;red&quot;</span>)
       })</code></pre></div>
<p><img src="fig/lattice-xyplot-asset-income-2.png" style="display: block; margin: auto;" /></p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">### 2.5.2. 자산, 소득과 득표수
<span class="kw">xyplot</span>(<span class="st">`</span><span class="dt">후보별 득표수</span><span class="st">`</span>~<span class="st"> `</span><span class="dt">17년제곱미터당가격</span><span class="st">`</span>|<span class="st">`</span><span class="dt">후보명</span><span class="st">`</span>, <span class="dt">data =</span> oh_dat, 
       <span class="dt">as.table =</span> <span class="ot">TRUE</span>,
       <span class="dt">groups =</span> <span class="st">`</span><span class="dt">후보명</span><span class="st">`</span>,
       <span class="dt">panel =</span> function(x, y, ...) {
           <span class="kw">panel.smoothScatter</span>(x, y, ...)
           <span class="kw">panel.loess</span>(x, y, <span class="dt">col=</span><span class="st">&quot;red&quot;</span>)
       })</code></pre></div>
<p><img src="fig/lattice-xyplot-asset-income-3.png" style="display: block; margin: auto;" /></p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">xyplot</span>(<span class="st">`</span><span class="dt">후보별 득표수</span><span class="st">`</span>~<span class="st"> `</span><span class="dt">평균 보험료</span><span class="st">`</span>|<span class="st">`</span><span class="dt">후보명</span><span class="st">`</span>, <span class="dt">data =</span> oh_dat, 
       <span class="dt">as.table =</span> <span class="ot">TRUE</span>,
       <span class="dt">groups =</span> <span class="st">`</span><span class="dt">후보명</span><span class="st">`</span>,
       <span class="dt">panel =</span> function(x, y, ...) {
           <span class="kw">panel.smoothScatter</span>(x, y, ...)
           <span class="kw">panel.loess</span>(x, y, <span class="dt">col=</span><span class="st">&quot;red&quot;</span>)
       })</code></pre></div>
<p><img src="fig/lattice-xyplot-asset-income-4.png" style="display: block; margin: auto;" /></p>
<h3 id="연령별-후보-득표율과-득표수">2.6. 연령별 후보 득표율과 득표수</h3>
<p>제19대 대통령선거는 연령대별로 대선후보에 대한 호불호가 확연히 나타난 선거로 기억된다. 시구군별 연령을 기준으로 대선 후보별 득표율과 득표수 관계를 도식화해보는 것도 의미가 있다.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">## 2.6. 연령 득표율/수 ---------------------------
<span class="kw">xyplot</span>(<span class="st">`</span><span class="dt">후보별 득표율</span><span class="st">`</span>~<span class="st"> `</span><span class="dt">17년 유권자평균연령</span><span class="st">`</span>|<span class="st">`</span><span class="dt">후보명</span><span class="st">`</span>, <span class="dt">data =</span> oh_dat, 
       <span class="dt">as.table =</span> <span class="ot">TRUE</span>,
       <span class="dt">groups =</span> <span class="st">`</span><span class="dt">후보명</span><span class="st">`</span>,
       <span class="dt">panel =</span> function(x, y, ...) {
           <span class="kw">panel.smoothScatter</span>(x, y, ...)
           <span class="kw">panel.loess</span>(x, y, <span class="dt">col=</span><span class="st">&quot;red&quot;</span>)
       })</code></pre></div>
<p><img src="fig/lattice-xyplot-age-1.png" style="display: block; margin: auto;" /></p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">xyplot</span>(<span class="st">`</span><span class="dt">후보별 득표수</span><span class="st">`</span>~<span class="st"> `</span><span class="dt">17년 유권자평균연령</span><span class="st">`</span>|<span class="st">`</span><span class="dt">후보명</span><span class="st">`</span>, <span class="dt">data =</span> oh_dat, 
       <span class="dt">as.table =</span> <span class="ot">TRUE</span>,
       <span class="dt">groups =</span> <span class="st">`</span><span class="dt">후보명</span><span class="st">`</span>,
       <span class="dt">panel =</span> function(x, y, ...) {
           <span class="kw">panel.smoothScatter</span>(x, y, ...)
           <span class="kw">panel.loess</span>(x, y, <span class="dt">col=</span><span class="st">&quot;red&quot;</span>)
       })</code></pre></div>
<p><img src="fig/lattice-xyplot-age-2.png" style="display: block; margin: auto;" /></p>
<h2 id="상자그림을-통한-후보-유사성">3. 상자그림을 통한 후보 유사성</h2>
<p>시구군별로 후보별 득표수를 시각화하면 문재인, 안철수가 한 그룹, 홍준표, 유승민이 한 그룹으로 묶인 것이 확인된다.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">## 3. 상자그림 ---------------------------
oh_dat &lt;-<span class="st"> </span>oh_dat %&gt;%<span class="st"> </span><span class="kw">ungroup</span>() %&gt;%<span class="st"> </span>
<span class="st">    </span><span class="kw">group_by</span>(<span class="dt">hubo=</span>후보명) %&gt;%<span class="st">  </span>
<span class="st">    </span><span class="kw">mutate</span>(시도정렬 =<span class="st"> </span><span class="kw">reorder</span>(<span class="st">`</span><span class="dt">시도</span><span class="st">`</span>, <span class="st">`</span><span class="dt">후보별 득표수</span><span class="st">`</span>, median, <span class="dt">na.rm =</span> <span class="ot">TRUE</span>))

<span class="kw">bwplot</span>( <span class="st">`</span><span class="dt">시도정렬</span><span class="st">`</span> ~<span class="st"> `</span><span class="dt">후보별 득표수</span><span class="st">`</span> |<span class="st"> </span>후보명, <span class="dt">data =</span> oh_dat, 
        <span class="dt">as.table =</span> <span class="ot">TRUE</span>,
        <span class="dt">group =</span> 후보명,
        <span class="dt">outer=</span><span class="ot">TRUE</span>,
        <span class="dt">scales =</span> <span class="kw">list</span>(<span class="dt">relation =</span> <span class="st">&quot;free&quot;</span>))</code></pre></div>
<p><img src="fig/lattice-bwplot-1.png" style="display: block; margin: auto;" /></p>
<aside class="callout panel panel-info">
<div class="panel-heading">
<h3 id="error-in-grouped_df_impldata-unnamevars-drop-unknown-column-후보명"><span class="glyphicon glyphicon-pushpin"></span>Error in grouped_df_impl(data, unname(vars), drop) : unknown column ‘후보명’</h3>
</div>
<div class="panel-body">
<p>어처구니가 없을 수 있지만 사실이다. 이런 오류가 있는 경우 절대 당황하지 않고 적당한 영어변수명을 넣어주면 해결된다.</p>
<ul>
<li>변경전: group_by(후보명) %&gt;%<br />
</li>
<li>변경후: group_by(hubo=후보명) %&gt;%</li>
</ul>
<p>참고: <a href="http://notchained.hatenablog.com/entry/satoyoheiadventcalender2016">Technically, technophobic. 일본 블로그</a></p>
</div>
</aside>
<h2 id="누적-분포-그래프를-통한-후보가-표차이-시각화">4. 누적 분포 그래프를 통한 후보가 표차이 시각화</h2>
<p>누적분포 그래프는 각 후보간 득표수 차이를 시각적으로 확연히 보여준다.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">## 4. 누적 분포 그래프 ---------------------------
oh_dat &lt;-<span class="st"> </span>oh_dat %&gt;%<span class="st"> </span><span class="kw">ungroup</span>() %&gt;%<span class="st"> </span>
<span class="st">    </span><span class="kw">mutate</span>(시도명 =<span class="st"> </span>forcats::<span class="kw">fct_recode</span>(시도, 
                                       <span class="st">&quot;대전&quot;</span> =<span class="st"> &quot;세종&quot;</span>))

<span class="kw">ecdfplot</span>(  ~<span class="st"> `</span><span class="dt">후보별 득표수</span><span class="st">`</span> |<span class="st"> </span>시도명 , <span class="dt">data =</span> oh_dat,
          <span class="dt">group =</span> 후보명,
          <span class="dt">ref =</span> <span class="ot">TRUE</span>)</code></pre></div>
<p><img src="fig/lattice-ecdf-1.png" style="display: block; margin: auto;" /></p>
<div class="footnotes">
<hr />
<ol>
<li id="fn1"><p><a href="https://r-ecology.blogspot.kr/2011/03/for-all-your-pairwise-comparison-needs.html">Five ways to visualize your pairwise comparisons</a><a href="#fnref1">↩</a></p></li>
</ol>
</div>
        </div>
      </div>
      </article>
      <div class="footer">
        <a class="label swc-blue-bg" href="http://software-carpentry.org">Software Carpentry</a>
        <a class="label swc-blue-bg" href="https://github.com/swcarpentry/lesson-template">Source</a>
        <a class="label swc-blue-bg" href="mailto:admin@software-carpentry.org">Contact</a>
        <a class="label swc-blue-bg" href="LICENSE.html">License</a>
      </div>
    </div>
    <!-- Javascript placed at the end of the document so the pages load faster -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
    <script src="css/bootstrap/bootstrap-js/bootstrap.js"></script>
    <script src='https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML'></script>
  </body>
</html>
